#include <stdio.h>
#include <locale.h>

//Primeira parte do trabalho
//Sofia Kitaeva e João Vitor Spala

typedef struct Jogada{
    int linhaDe, colunaDe, linhaPara, colunaPara;
}jogada;

void IniciaTabuleiro(int *p[9][9]){
   for(int i=1; i<9; i++){ //colocar peões
       *p[2][i]=1;
       *p[7][i]=-1;
   }
   
   for(int i=1; i<9; i++){ //coordenadas laterais do tabuleiro
        *p[i][0]=i;
        *p[0][i]=i;
   }
   
   for(int i=1; i<9; i++){ //peça brancas
        if(i==1 || i==8) //torres
            *p[1][i]=4;
        else if(i==2 || i==7) //cavalos
            *p[1][i]=2;
            else if(i==3 || i==6) //bispos
                *p[1][i]=3;
   }
   *p[1][4]=5; //rainha
   *p[1][5]=6; //rei
   
   for(int i=1; i<9; i++){ //todas as peças pretas
       *p[8][i]=(*p[0][i])*-1;
   }
}

void MostrarTabuleiro(int tab[9][9]){
    for(int i=0; i<9; i++){
        for(int j=0; j<9; j++){
            if(tab[i][j]<0)
                printf("%d ", tab[i][j]);
            else
                printf("%d  ", tab[i][j]);
        }
        printf("\n");
    }
}

void MovimentoPossivel(int *peca[9][9], jogada *possi[30]){
	int c=0;
	for(int i=0; i<30; i++){
        (*possi[i]).linhaDe=0;
        (*possi[i]).colunaDe=0;
        (*possi[i]).linhaPara=0;
        (*possi[i]).colunaPara=0;
    }
    for(int i=1; i<9; i++){
        for(int j=1; j<9; j++){
        	
            if(*peca[i][j]==4)//se for torre branca
			{
            	for(int x=i;x>=0;x--)//torre pra cima
				{
					(*possi[c]).linhaDe=i;
            		(*possi[c]).colunaDe=j;
            		(*possi[c]).colunaPara=j;
            		if(*peca[x][j]==0){
            			(*possi[c]).linhaPara=x;
            			c++;
            			else if(*peca[x][j]<0){
            				(*possi[c]).linhaPara=x;
            				c++;
            				break;
						}
					}
				}
				for(int x=i; x<=9;x++)//torre pra baixo
				{
					(*possi[c]).linhaDe=i;
            		(*possi[c]).colunaDe=j;
            		(*possi[c]).colunaPara=j;
            		if(*peca[x][j]==0){
            			(*possi[c]).linhaPara=x;
            			c++;
            			else if(*peca[x][j]<0){
            				(*possi[c]).linhaPara=x;
            				c++;
            				break;
						}
					}
				}
				for(int x=j; x>=0;x--)//torre pra esquerda
				{
					(*possi[c]).linhaDe=i;
            		(*possi[c]).colunaDe=j;
            		(*possi[c]).linhaPara=i;
            		if(*peca[x][j]==0){
            			(*possi[c]).colunaPara=x;
            			c++;
            			else if(*peca[x][j]<0){
            				(*possi[c]).colunaPara=x;
            				c++;
            				break;
						}
					}
				}
				for(int x=j; x<=9;x++)//torre pra direita
				{
					(*possi[c]).linhaDe=i;
            		(*possi[c]).colunaDe=j;
            		(*possi[c]).linhaPara=i;
            		if(*peca[x][j]==0){
            			(*possi[c]).colunaPara=x;
            			c++;
            			else if(*peca[x][j]<0){
            				(*possi[c]).colunaPara=x;
            				c++;
            				break;
						}
					}		
				} 	
    	    } 
		 	if(*peca[i][j]==3)//se for bispo
			 {
		 		for(int x=)	
			 }
    	}
	}
}
int main(){
    int tabuleiro[9][9];
    int *pT[9][9];
    
    
    for(int i=0; i<9; i++){ //zerar tabuleiro
        for(int j=0; j<9; j++){
            tabuleiro[i][j]=0;
            pT[i][j]=&tabuleiro[i][j]; //associar cada casa da matriz a um ponteiro
        }
    }
    
    IniciaTabuleiro(pT); //passa matriz por ponteiro
    
    MostrarTabuleiro(tabuleiro);
    
    jogada possiveis[20];
    jogada *pP[20];
    
    for(int i=0; i<30; i++){
        pP[i]=&possiveis[i];
    }
    
      printf("Insira as coordenadas da peça que deseja movimentar\n");
    while(1==1){
        int i, j;
        scanf("%d %d", &i, &j);
        if(tabuleiro[i][j]==0 || i==0 || j==0){
            printf("Coordenadas inválidas\n");
        }
        else{
            Movimento(pT, pP);
        }    
        
    }

    return 0;
}
